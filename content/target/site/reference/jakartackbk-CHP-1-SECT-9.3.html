<html xmlns:fo="http://www.w3.org/1999/XSL/Format">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>1.9.3.&nbsp;Discussion</title>
      <link rel="stylesheet" href="../css/html.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="book.html" title="Jakarta Commons Cookbook">
      <link rel="up" href="jakartackbk-CHP-1-SECT-9.html" title="1.9.&nbsp;Cloning and Reversing Arrays">
      <link rel="prev" href="jakartackbk-CHP-1-SECT-9.2.html" title="1.9.2.&nbsp;Solution">
      <link rel="next" href="jakartackbk-CHP-1-SECT-10.html" title="1.10.&nbsp;Transforming Between Object Arraysand Primitive Arrays">
   </head>
   <body>
      <div id="frame">
         <div id="forbg">
            <div id="user-header">
               <div id="logo"><a href="http://www.discursive.com" title="$"><img src="../images/discursive-logo.png" border="0"></a></div>
               <div id="right-header">
                  <h2>Common Java Cookbook</h2>
                  <h4>Edition: 0.1-SNAPSHOT</h4>
               </div>
               <div style="clear:both;"></div>
               <div id="left-sidebar"></div>
            </div>
            <div class="navheader">
               <table width="100%" summary="Navigation header">
                  <tr>
                     <td width="40%" align="left"><a accesskey="p" href="jakartackbk-CHP-1-SECT-9.2.html">1.9.2.&nbsp;Solution</a>&nbsp;
                     </td>
                     <td width="20%" align="center"><a accesskey="h" href="book.html">
                           												TOC
                                                                       </a></td>
                     <td width="40%" align="right">&nbsp;<a accesskey="n" href="jakartackbk-CHP-1-SECT-10.html">1.10.&nbsp;Transforming Between Object Arraysand Primitive Arrays</a></td>
                  </tr>
               </table>
            </div>
            <div class="sect2" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="jakartackbk-CHP-1-SECT-9.3"></a>1.9.3.&nbsp;Discussion
                        </h3>
                        <div class="section-icon"></div>
                     </div>
                  </div>
               </div>
               <p>In <a href="jakartackbk-CHP-1-SECT-9.2.html#jakartackbk-CHP-1-EX-5" title="Example&nbsp;1-5.&nbsp;Cloning and reversing a primitive array with ArrayUtils">Example 1-5</a>, <code class="literal">clone( )</code> returns
                  a reference to a new array, and <code class="literal">reverse( )</code>
                  operates on the array reference supplied as a parameter. It is
                  important to realize that while <code class="literal">clone( )</code> leaves
                  the original array alone, <code class="literal">reverse( )</code> operates
                  directly on the supplied array. In addition to supporting all
                  primitive arrays, <code class="literal">ArrayUtils.clone( )</code> and
                  <code class="literal">ArrayUtils.reverse( )</code> work with object arrays. If
                  <code class="literal">array</code> had been an array of <code class="literal">Long</code>
                  objects, the code would bear a striking resemblance to the previous
                  example.
               </p>
               <p>The only difference between Examples <a href="jakartackbk-CHP-1-SECT-9.3.html#jakartackbk-CHP-1-EX-6" title="Example&nbsp;1-6.&nbsp;Cloning and reversing an Object[ ] with ArrayUtils">Example 1-6</a> and
                  <a href="jakartackbk-CHP-1-SECT-9.2.html#jakartackbk-CHP-1-EX-5" title="Example&nbsp;1-5.&nbsp;Cloning and reversing a primitive array with ArrayUtils">Example 1-5</a> is the type of array being cloned and
                  reversed. Again, <code class="literal">ArrayUtils.toString( )</code> is used to
                  print out the contents of both the original and the reverse array:
               </p><a name="I_1_tt25"></a><pre class="programlisting">Original: { 3, 56, 233 }
Reversed: { 233, 56, 3 }</pre><div class="example"><a name="jakartackbk-CHP-1-EX-6"></a><p class="title"><b>Example&nbsp;1-6.&nbsp;Cloning and reversing an Object[  ] with ArrayUtils</b></p>
                  <div class="example-contents"><pre class="programlisting">Long[] array = new Long[] { new Long(3), new Long(56), new Long(233) };
Long[] reversed = ArrayUtils.clone( array );
ArrayUtils.reverse( reversed );

System.out.println( "Original: " + ArrayUtils.toString( array ) );
System.out.println( "Reversed: " + ArrayUtils.toString( reversed ) );</pre></div>
               </div><br class="example-break"><p>Without the aid of <code class="literal">ArrayUtils.clone( )</code> and
                  <code class="literal">ArrayUtils.reverse( )</code>, this task would have
                  involved writing a loop to populate a reversed array. The following
                  code completes the same task, but, in order to reverse an array, this
                  example assigns the values from the original array in reverse;
                  elements are inserted starting at
                  <code class="literal">reversed[reversed.length</code> 
                                 <code class="literal">- 1]</code>
                  and ending at <code class="literal">reversed[0]</code>:
               </p><a name="I_1_tt26"></a><pre class="programlisting">// readTemps returns a 1000 member double[]
double[] temperature = readTemps( );

double[] reversed = new double[temperature.length];
for( int i = 0; i &lt; temperature.length; i++ ) {
    reversed[reversed.length - (i+1)] = temperature[i];
}</pre><p>Another option is the use of the <code class="literal">Collections.reverse()</code>
                                 <a class="indexterm" name="jakartackbk-CHP-1-ITERM-1836"></a>
                                 <a class="indexterm" name="jakartackbk-CHP-1-ITERM-1837"></a> method. J2SE contains a
                  <code class="literal">Collections</code> object with a static <code class="literal">reverse()</code> method, but this only operates on a
                  <code class="literal">List</code> object. If you had an array of
                  <code class="literal">double</code> primitives, and you wanted to take
                  advantage of the <code class="literal">Collections</code> class, you would need
                  to convert your double array to a list. Without Java
                  1.5's
                  <a class="indexterm" name="jakartackbk-CHP-1-ITERM-1838"></a>autoboxing
                  feature, a <code class="literal">double[]</code> will need to be translated
                  into a <code class="literal">Double[]</code> before elements can be used to
                  populate a list:
               </p><a name="I_1_tt27"></a><pre class="programlisting">double[] temps = readTemps( );

List tempList = new ArrayList( );
for( int i = 0; i &lt; temps.length; i++ ) {
    tempList.add( new Double[temps[i]] );
}

Collections.reverse( tempList );

double[] reversed = new double( tempList.size( ) );
Iterator i = tempList.iterator( );
int index = 0;
while( i.hasNext( ) ) {
    reversed[index] = ((Double) i.next( )).doubleValue( );
    index++;
}</pre><p>That nasty translation between a <code class="literal">double</code> array and
                  a list of <code class="literal">Double</code> objects complicates your code.
                  The next recipe will touch upon an easier method for performing this
                  translation.
               </p>
               <p>Is <code class="literal">ArrayUtils.clone( )</code> really necessary? All
                  arrays have a <code class="literal">clone( )</code> method, and all Java arrays
                  implement <code class="literal">Cloneable</code> and
                  <code class="literal">Serializable</code>, but I would be surprised if many
                  Java developers have read the relevant section of the Java Language
                  Specification (JLS), which discusses Array Members (section 10.7).
                  All arrays can be cloned by calling the <code class="literal">clone( )</code>
                  method:
               </p><a name="I_1_tt28"></a><pre class="programlisting">long[] temps = readTemps( );
long[] cloned = (long[]) temps.clone( );</pre><p>
                                 <code class="literal">ArrayUtils.clone( )</code> doesn't
                  provide you with any performance benefits, it
                  doesn't necessarily improve your code, and one could
                  debate the assertion that it makes for more readable code. But,
                  mainly, it exists as a safe way to handle <code class="literal">null</code>
                  array references. If you attempt to clone a <code class="literal">null</code>
                  reference, this utility will return a <code class="literal">null</code> instead
                  of throwing a runtime exception.
               </p>
            </div>
            <div class="navfooter">
               <hr>
               <table width="100%" summary="Navigation footer">
                  <tr>
                     <td width="40%" align="left"><a accesskey="p" href="jakartackbk-CHP-1-SECT-9.2.html">Prev</a>&nbsp;
                     </td>
                     <td width="20%" align="center"><a accesskey="h" href="book.html">Home</a></td>
                     <td width="40%" align="right">&nbsp;<a accesskey="n" href="jakartackbk-CHP-1-SECT-10.html">Next</a></td>
                  </tr>
                  <tr>
                     <td width="40%" align="left" valign="top">1.9.2.&nbsp;Solution&nbsp;</td>
                     <td width="20%" align="center"><span style="color:white;font-size:90%;"><a href="http://www.sonatype.com/" title="Discursive: Discursive">Sponsored by Discursive
                                                                      </a></span></td>
                     <td width="40%" align="right" valign="top">&nbsp;1.10.&nbsp;Transforming Between Object Arraysand Primitive Arrays</td>
                  </tr>
               </table>
            </div><br><center>
                             Copyright 2009. Discursive. All Rights Reserved.
                           
            </center><script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1693297-1");
pageTracker._initData();
pageTracker._setDomainName(".sonatype.com");
pageTracker._trackPageview();
</script><script src="http://loopfuse.net/webrecorder/js/listen.js" type="text/javascript"></script><script type="text/javascript">
  _lf_cid = "LF_5208d25a";
_lf_remora();
</script></div>
      </div>
   </body>
</html>