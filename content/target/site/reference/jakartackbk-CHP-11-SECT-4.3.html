<html xmlns:fo="http://www.w3.org/1999/XSL/Format">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>11.4.3.&nbsp;Discussion</title>
      <link rel="stylesheet" href="../css/html.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="book.html" title="Jakarta Commons Cookbook">
      <link rel="up" href="jakartackbk-CHP-11-SECT-4.html" title="11.4.&nbsp;Sending Parameters in a Query String">
      <link rel="prev" href="jakartackbk-CHP-11-SECT-4.2.html" title="11.4.2.&nbsp;Solution">
      <link rel="next" href="jakartackbk-CHP-11-SECT-4.4.html" title="11.4.4.&nbsp;See Also">
   </head>
   <body>
      <div id="frame">
         <div id="forbg">
            <div id="user-header">
               <div id="logo"><a href="http://www.discursive.com" title="$"><img src="../images/discursive-logo.png" border="0"></a></div>
               <div id="right-header">
                  <h2>Common Java Cookbook</h2>
                  <h4>Edition: 0.1-SNAPSHOT</h4>
               </div>
               <div style="clear:both;"></div>
               <div id="left-sidebar"></div>
            </div>
            <div class="navheader">
               <table width="100%" summary="Navigation header">
                  <tr>
                     <td width="40%" align="left"><a accesskey="p" href="jakartackbk-CHP-11-SECT-4.2.html">11.4.2.&nbsp;Solution</a>&nbsp;
                     </td>
                     <td width="20%" align="center"><a accesskey="h" href="book.html">
                           												TOC
                                                                       </a></td>
                     <td width="40%" align="right">&nbsp;<a accesskey="n" href="jakartackbk-CHP-11-SECT-4.4.html">11.4.4.&nbsp;See Also</a></td>
                  </tr>
               </table>
            </div>
            <div class="sect2" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="jakartackbk-CHP-11-SECT-4.3"></a>11.4.3.&nbsp;Discussion
                        </h3>
                        <div class="section-icon"></div>
                     </div>
                  </div>
               </div>
               <p>In the previous example, <code class="literal">method.setQueryString()</code>
                                 <a class="indexterm" name="jakartackbk-CHP-11-ITERM-3221"></a>
                                 <a class="indexterm" name="jakartackbk-CHP-11-ITERM-3222"></a> is used to set the entire query string at
                  once, but there is another alternative: setting the query string with
                  an array of <code class="literal">NameValuePair</code> objects. When a
                  <code class="literal">NameValuePair[]</code>
                                 <a class="indexterm" name="jakartackbk-CHP-11-ITERM-3223"></a>
                  is passed to <code class="literal">method.setQueryString( )</code>, the
                  <code class="literal">HttpMethod</code> then takes each pair and creates a
                  series of parameters delimited by an ampersand. The approach
                  encourages cleaner code because you are not concatenating strings to
                  pass multiple parameters. The following example sets the same
                  parameters used in the previous example, using
                  <code class="literal">NameValuePair</code> objects:
               </p><a name="I_11_tt438"></a><pre class="programlisting">// Set query string with name value pair objects
HttpMethod method = <strong class="userinput"><code>new</code></strong> GetMethod( url );
NameValuePair pair = 
<strong class="userinput"><code>    new</code></strong> NameValuePair( "test1", URIUtil.encodeQuery( "O Reilly" ) );
NameValuePair pair2 = 
    <strong class="userinput"><code>new</code></strong> NameValuePair( "blah", URIUtil.encodeQuery( "Whoop" ) );
NameValuePair[] pairs = <strong class="userinput"><code>new</code></strong> NameValuePair[] { pair, pair2 };
method.setQueryString( pairs );
System.out.println( "With NameValuePairs: " + method.getURI( ) );
client.executeMethod( method );
System.out.println( "Response:\n " + method.getResponseBodyAsString( ) );
method.releaseConnection( );</pre><p>According to RFC 1738 (Uniform Resource Locators (URL) specification)
                  URLs can only contain alphanumeric characters,
                  <code class="literal">[0-9a-zA-Z]</code>, and a few other special characters.
                  If you need to send a parameter with an unacceptable character in a
                  URL, you will need to encode your string according to the standard
                  defined in RFC 1738. <code class="literal">URIUtil</code> exposes a method
                  <code class="literal">encodeQuery( )</code> that can be used to encode the
                  value "O Reilly" in the previous
                  example. The following code demonstrates the use of
                  <code class="literal">URIUtil</code> to encode strings for inclusion in a URL:
               </p><a name="I_11_tt439"></a><pre class="programlisting">String encoded1 = URIUtil.encodeQuery( "&lt;test&gt;=O'Connell" );
String encoded2 = URIUtil.encodeQuery( "one:two=thr ee#" );

String decoded = URIUtil.decode( "Hello%20World%3F" );

System.out.println( "Encoded: " + encoded1 );
System.out.println( "Encoded: " + encoded2 );
System.out.println( "Decoded: " + decoded );</pre><p>This simple example encodes two strings and decodes an encoded string
                  using <code class="literal">URIUtil</code>. The output shows the result of each
                  transformation:
               </p><a name="I_11_tt440"></a><pre class="programlisting">Encoded: %3ctest%e3=O'Connell
Encoded: one%3atwo=thr%20ee#23
Decoded: Hello World?</pre></div>
            <div class="navfooter">
               <hr>
               <table width="100%" summary="Navigation footer">
                  <tr>
                     <td width="40%" align="left"><a accesskey="p" href="jakartackbk-CHP-11-SECT-4.2.html">Prev</a>&nbsp;
                     </td>
                     <td width="20%" align="center"><a accesskey="h" href="book.html">Home</a></td>
                     <td width="40%" align="right">&nbsp;<a accesskey="n" href="jakartackbk-CHP-11-SECT-4.4.html">Next</a></td>
                  </tr>
                  <tr>
                     <td width="40%" align="left" valign="top">11.4.2.&nbsp;Solution&nbsp;</td>
                     <td width="20%" align="center"><span style="color:white;font-size:90%;"><a href="http://www.sonatype.com/" title="Discursive: Discursive">Sponsored by Discursive
                                                                      </a></span></td>
                     <td width="40%" align="right" valign="top">&nbsp;11.4.4.&nbsp;See Also</td>
                  </tr>
               </table>
            </div><br><center>
                             Copyright 2009. Discursive. All Rights Reserved.
                           
            </center><script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1693297-1");
pageTracker._initData();
pageTracker._setDomainName(".sonatype.com");
pageTracker._trackPageview();
</script><script src="http://loopfuse.net/webrecorder/js/listen.js" type="text/javascript"></script><script type="text/javascript">
  _lf_cid = "LF_5208d25a";
_lf_remora();
</script></div>
      </div>
   </body>
</html>