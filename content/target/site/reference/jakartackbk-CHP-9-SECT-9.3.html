<html xmlns:fo="http://www.w3.org/1999/XSL/Format">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>9.9.3.&nbsp;Discussion</title>
      <link rel="stylesheet" href="../css/html.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="book.html" title="Jakarta Commons Cookbook">
      <link rel="up" href="jakartackbk-CHP-9-SECT-9.html" title="9.9.&nbsp;Invoking Methods in a Template">
      <link rel="prev" href="jakartackbk-CHP-9-SECT-9.2.html" title="9.9.2.&nbsp;Solution">
      <link rel="next" href="jakartackbk-CHP-9-SECT-9.4.html" title="9.9.4.&nbsp;See Also">
   </head>
   <body>
      <div id="frame">
         <div id="forbg">
            <div id="user-header">
               <div id="logo"><a href="http://www.discursive.com" title="$"><img src="../images/discursive-logo.png" border="0"></a></div>
               <div id="right-header">
                  <h2>Common Java Cookbook</h2>
                  <h4>Edition: 0.1-SNAPSHOT</h4>
               </div>
               <div style="clear:both;"></div>
               <div id="left-sidebar"></div>
            </div>
            <div class="navheader">
               <table width="100%" summary="Navigation header">
                  <tr>
                     <td width="40%" align="left"><a accesskey="p" href="jakartackbk-CHP-9-SECT-9.2.html">9.9.2.&nbsp;Solution</a>&nbsp;
                     </td>
                     <td width="20%" align="center"><a accesskey="h" href="book.html">
                           												TOC
                                                                       </a></td>
                     <td width="40%" align="right">&nbsp;<a accesskey="n" href="jakartackbk-CHP-9-SECT-9.4.html">9.9.4.&nbsp;See Also</a></td>
                  </tr>
               </table>
            </div>
            <div class="sect2" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="jakartackbk-CHP-9-SECT-9.3"></a>9.9.3.&nbsp;Discussion
                        </h3>
                        <div class="section-icon"></div>
                     </div>
                  </div>
               </div>
               <p>Note that the <code class="literal">#score</code> macro is absent from this
                  template. The <code class="literal">#score</code> macro encapsulates
                  presentation logic to translate a number grade to a printed letter
                  grade. This macro is stored in a separate file made available as a
                  classpath resource stored in
                  <code class="filename">scripting/velocity/macros.vm</code>:
               </p><a name="I_9_tt383"></a><pre class="programlisting">#macro( score $student $passingGrade )
    #if( $student.score &gt;= $passingGrade )
      Student: ${student.name} Score: ${student.score}% PASS
    #else
      Student: ${student.name} Score: ${student.score}% FAIL
    #end
#end</pre><p>The <code class="literal">VelocityEngine</code> is configured to load both the
                  <code class="literal">#score</code> macro and the template from the classpath
                  by setting the <code class="literal">resource.loader</code>,
                  <code class="literal">class.resource.loader.description</code>, and
                  <code class="literal">class.resource.loader.class</code>. The
                  <code class="literal">#score</code> macro is loaded from a macro library, and
                  the location of this library is specified in the
                  <code class="literal">velocimacro.library</code> configuration property.
                  Velocity has built-in resource loaders to load resources from the
                  filesystem, the classpath, a database, or a JAR file. The following
                  configuration configures two resource loaders for a
                  <code class="literal">VelocityEngine</code>&#8212;a filesystem resource loader
                  and a classpath resource loader. When a resource is loaded, the
                  <code class="literal">VelocityEngine</code> attempts to locate the resource in
                  the filesystem, and, if the resource is not found, it searches the
                  classpath. Using this configuration, you can create an application
                  with default templates in the classpath, which can be overridden by
                  customized templates on the filesystem. The file resource loader is
                  also configured to cache file resources in memory, checking for a
                  modification every 600 seconds:
               </p><a name="I_9_tt384"></a><pre class="programlisting">resource.loader = file, class

file.resource.loader.description = Customized Templates
file.resource.loader.class = \ org.apache.velocity.runtime.resource.loader.
FileResourceLoader
file.resource.loader.path = custom/templates
file.resource.loader.cache = true
file.resource.loader.modificationCheckInterval = 600

class.resource.loader.description = Default Templates
class.resource.loader.class = \ org.apache.velocity.runtime.resource.loader.
ClasspathResourceLoader</pre><p>Instead of configuring a
                  <code class="literal">VelocityEngine</code>
                                 <a class="indexterm" name="jakartackbk-CHP-9-ITERM-2997"></a>
                  in Java code, the name of this properties file can be passed to the
                  <code class="literal">init( )</code> method:
               </p><a name="I_9_tt385"></a><pre class="programlisting">VelocityEngine engine = new VelocityEngine( );
engine.init( "conf/velocity.properties" );</pre></div>
            <div class="navfooter">
               <hr>
               <table width="100%" summary="Navigation footer">
                  <tr>
                     <td width="40%" align="left"><a accesskey="p" href="jakartackbk-CHP-9-SECT-9.2.html">Prev</a>&nbsp;
                     </td>
                     <td width="20%" align="center"><a accesskey="h" href="book.html">Home</a></td>
                     <td width="40%" align="right">&nbsp;<a accesskey="n" href="jakartackbk-CHP-9-SECT-9.4.html">Next</a></td>
                  </tr>
                  <tr>
                     <td width="40%" align="left" valign="top">9.9.2.&nbsp;Solution&nbsp;</td>
                     <td width="20%" align="center"><span style="color:white;font-size:90%;"><a href="http://www.sonatype.com/" title="Discursive: Discursive">Sponsored by Discursive
                                                                      </a></span></td>
                     <td width="40%" align="right" valign="top">&nbsp;9.9.4.&nbsp;See Also</td>
                  </tr>
               </table>
            </div><br><center>
                             Copyright 2009. Discursive. All Rights Reserved.
                           
            </center><script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1693297-1");
pageTracker._initData();
pageTracker._setDomainName(".sonatype.com");
pageTracker._trackPageview();
</script><script src="http://loopfuse.net/webrecorder/js/listen.js" type="text/javascript"></script><script type="text/javascript">
  _lf_cid = "LF_5208d25a";
_lf_remora();
</script></div>
      </div>
   </body>
</html>