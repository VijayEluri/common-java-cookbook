<html xmlns:fo="http://www.w3.org/1999/XSL/Format">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>1.14.3.&nbsp;Discussion</title>
      <link rel="stylesheet" href="../css/html.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="book.html" title="Jakarta Commons Cookbook">
      <link rel="up" href="jakartackbk-CHP-1-SECT-14.html" title="1.14.&nbsp;Rounding Date Objects">
      <link rel="prev" href="jakartackbk-CHP-1-SECT-14.2.html" title="1.14.2.&nbsp;Solution">
      <link rel="next" href="jakartackbk-CHP-1-SECT-14.4.html" title="1.14.4.&nbsp;See Also">
   </head>
   <body>
      <div id="frame">
         <div id="forbg">
            <div id="user-header">
               <div id="logo"><a href="http://www.discursive.com" title="$"><img src="../images/discursive-logo.png" border="0"></a></div>
               <div id="right-header">
                  <h2>Common Java Cookbook</h2>
                  <h4>Edition: 0.1-SNAPSHOT</h4>
               </div>
               <div style="clear:both;"></div>
               <div id="left-sidebar"></div>
            </div>
            <div class="navheader">
               <table width="100%" summary="Navigation header">
                  <tr>
                     <td width="40%" align="left"><a accesskey="p" href="jakartackbk-CHP-1-SECT-14.2.html">1.14.2.&nbsp;Solution</a>&nbsp;
                     </td>
                     <td width="20%" align="center"><a accesskey="h" href="book.html">
                           												TOC
                                                                       </a></td>
                     <td width="40%" align="right">&nbsp;<a accesskey="n" href="jakartackbk-CHP-1-SECT-14.4.html">1.14.4.&nbsp;See Also</a></td>
                  </tr>
               </table>
            </div>
            <div class="sect2" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="jakartackbk-CHP-1-SECT-14.3"></a>1.14.3.&nbsp;Discussion
                        </h3>
                        <div class="section-icon"></div>
                     </div>
                  </div>
               </div>
               <p>If you are creating a system to record the time of an event, and you
                  are not certain exactly when that event happened, it is appropriate
                  to round that date and time to an approximate value. Are you certain
                  that you woke up at 9:02 A.M., 23 seconds, and 879 milliseconds? Or,
                  is it more likely that you remember that you woke up around 9 A.M.?
                  It would be appropriate to round this time to the
                  <code class="literal">Calendar.MINUTE</code> or
                  <code class="literal">Calendar.HOUR</code> field at the very
                  least&#8212;recording a general time, such as
                  "around 9 A.M." In the following
                  example, <code class="literal">DateUtils.round( )</code> calculates an
                  approximate time:
               </p><a name="I_1_tt39"></a><pre class="programlisting">// Rounding to the nearest hour
Date wokeUp = new Date( );
Date wokeUpAround = DateUtils.round( now, Calendar.HOUR );</pre><p>If your <code class="literal">wokeUp</code> 
                                 <code class="literal">Date</code> object is
                  1:31 P.M., then <code class="literal">wokeUpAround</code> will be equal to 2:00
                  P.M. But, if you woke up at 1:15 P.M., your
                  <code class="literal">wokeUpAround</code> object would then be rounded down to
                  1:00 P.M. When you round or truncate to a field, all of the date
                  fields less significant than the specified field are set to zero. In
                  this example, rounding to an hour causes the minutes, seconds, and
                  milliseconds to be set to zero. Rounding a <code class="literal">Date</code> to
                  a <code class="literal">Calendar.YEAR</code> sets the day of the year to one
                  and the time to the first instance of the nearest year:
               </p><a name="I_1_tt40"></a><pre class="programlisting">Date now = new Date( )
Date nearestYear = DateUtils.round( now, Calendar.YEAR );</pre><p>This previous code rounds to the nearest year, and if
                  <code class="literal">now</code> is 15 May 2004, the resulting
                  <code class="literal">Date</code> will correspond to the first instance of
                  2004. Alternatively, if <code class="literal">now</code> is 15 July 2004, the
                  resulting <code class="literal">Date</code> will be the first instance of 2005.
               </p>
               <p>
                                 <code class="literal">DateUtils.round( )</code> works with the following field
                  values, listed in order of significance:
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>
                                                <code class="literal">Calendar.MILLISECOND</code>
                                             
                        </p>
                     </li>
                     <li>
                        <p>
                                                <code class="literal">Calendar.SECOND</code>
                                             
                        </p>
                     </li>
                     <li>
                        <p>
                                                <code class="literal">Calendar.MINUTE</code>
                                             
                        </p>
                     </li>
                     <li>
                        <p>
                                                <code class="literal">Calendar.HOUR_OF_DAY</code> and
                           <code class="literal">Calendar.HOUR</code>
                                             
                        </p>
                     </li>
                     <li>
                        <p>
                                                <code class="literal">Calendar.DATE</code>,
                           <code class="literal">Calendar.DAY_OF_MONTH</code>, and
                           <code class="literal">Calendar.AM_PM</code>
                                             
                        </p>
                     </li>
                     <li>
                        <p>
                                                <code class="literal">Calendar.MONTH</code>
                                             
                        </p>
                     </li>
                     <li>
                        <p>
                                                <code class="literal">DateUtils.SEMI_MONTH</code>
                                             
                        </p>
                     </li>
                     <li>
                        <p>
                                                <code class="literal">Calendar.YEAR</code>
                                             
                        </p>
                     </li>
                     <li>
                        <p>
                                                <code class="literal">Calendar.ERA</code>
                                             
                        </p>
                     </li>
                  </ul>
               </div>
               <p>
                                 <code class="literal">DateUtils</code> introduces a
                  <code class="literal">DateUtils.SEMI_MONTH</code> field, which will cause dates
                  to be rounded to the middle or beginning of a month. In
                  <code class="literal">DateUtils</code>, the middle of the month is defined as
                  the 15th day of the month with the second half of the month starting
                  at midnight on the 16th day of the month:
               </p><a name="I_1_tt41"></a><pre class="programlisting">Calendar cal = Calendar.getInstance( );
cal.set( 2004, Calendar.MARCH, 5, 10, 2, 2 );

System.out.println( DateUtils.round( cal.getTime( ) , 
DateUtils.SEMI_MONTH ) );</pre><p>This code will print out <code class="filename">Mon Mar 01 00:00:00 CST
                     2004</code> as the 5th of March and is closer to the beginning of
                  the month than it is to the middle of the month. If the
                  <code class="literal">Calendar</code> object was March, 14th, 2004, and it had
                  been rounded to a <code class="literal">DateUtils.SEMI_MONTH</code>, the
                  rounded date would have been set to midnight on March 16th. One would
                  think that the middle of March is the 15th? Isn't
                  that date the famous Ides of March&#8212;the date on which Brutus
                  betrayed Caesar? According to <code class="literal">DateUtils</code>, the first
                  half of the month ends at 11:59 P.M. on the 15th of the month; the
                  <code class="literal">DateUtils.round( )</code> method returns the first
                  instant of the beginning of the second half of March: <code class="filename">March
                     16 12:00:00.000 A.M</code>.
               </p>
            </div>
            <div class="navfooter">
               <hr>
               <table width="100%" summary="Navigation footer">
                  <tr>
                     <td width="40%" align="left"><a accesskey="p" href="jakartackbk-CHP-1-SECT-14.2.html">Prev</a>&nbsp;
                     </td>
                     <td width="20%" align="center"><a accesskey="h" href="book.html">Home</a></td>
                     <td width="40%" align="right">&nbsp;<a accesskey="n" href="jakartackbk-CHP-1-SECT-14.4.html">Next</a></td>
                  </tr>
                  <tr>
                     <td width="40%" align="left" valign="top">1.14.2.&nbsp;Solution&nbsp;</td>
                     <td width="20%" align="center"><span style="color:white;font-size:90%;"><a href="http://www.sonatype.com/" title="Discursive: Discursive">Sponsored by Discursive
                                                                      </a></span></td>
                     <td width="40%" align="right" valign="top">&nbsp;1.14.4.&nbsp;See Also</td>
                  </tr>
               </table>
            </div><br><center>
                             Copyright 2009. Discursive. All Rights Reserved.
                           
            </center><script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1693297-1");
pageTracker._initData();
pageTracker._setDomainName(".sonatype.com");
pageTracker._trackPageview();
</script><script src="http://loopfuse.net/webrecorder/js/listen.js" type="text/javascript"></script><script type="text/javascript">
  _lf_cid = "LF_5208d25a";
_lf_remora();
</script></div>
      </div>
   </body>
</html>