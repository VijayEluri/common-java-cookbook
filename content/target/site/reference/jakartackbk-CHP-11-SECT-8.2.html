<html xmlns:fo="http://www.w3.org/1999/XSL/Format">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>11.8.2.&nbsp;Solution</title>
      <link rel="stylesheet" href="../css/html.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="book.html" title="Jakarta Commons Cookbook">
      <link rel="up" href="jakartackbk-CHP-11-SECT-8.html" title="11.8.&nbsp;Sending POST Data from a File">
      <link rel="prev" href="jakartackbk-CHP-11-SECT-8.html" title="11.8.&nbsp;Sending POST Data from a File">
      <link rel="next" href="jakartackbk-CHP-11-SECT-8.3.html" title="11.8.3.&nbsp;Discussion">
   </head>
   <body>
      <div id="frame">
         <div id="forbg">
            <div id="user-header">
               <div id="logo"><a href="http://www.discursive.com" title="$"><img src="../images/discursive-logo.png" border="0"></a></div>
               <div id="right-header">
                  <h2>Common Java Cookbook</h2>
                  <h4>Edition: 0.1-SNAPSHOT</h4>
               </div>
               <div style="clear:both;"></div>
               <div id="left-sidebar"></div>
            </div>
            <div class="navheader">
               <table width="100%" summary="Navigation header">
                  <tr>
                     <td width="40%" align="left"><a accesskey="p" href="jakartackbk-CHP-11-SECT-8.html">11.8.&nbsp;Sending POST Data from a File</a>&nbsp;
                     </td>
                     <td width="20%" align="center"><a accesskey="h" href="book.html">
                           												TOC
                                                                       </a></td>
                     <td width="40%" align="right">&nbsp;<a accesskey="n" href="jakartackbk-CHP-11-SECT-8.3.html">11.8.3.&nbsp;Discussion</a></td>
                  </tr>
               </table>
            </div>
            <div class="sect2" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="jakartackbk-CHP-11-SECT-8.2"></a>11.8.2.&nbsp;Solution
                        </h3>
                        <div class="section-icon"></div>
                     </div>
                  </div>
               </div>
               <p>Create a <code class="literal">PostMethod</code>, create a
                  <code class="literal">File</code> object, and call <code class="literal">setRequestBody(
                     )</code>
                                 <a class="indexterm" name="jakartackbk-CHP-11-ITERM-3265"></a>
                                 <a class="indexterm" name="jakartackbk-CHP-11-ITERM-3266"></a> and <code class="literal">setRequestContentLength()</code>
                                 <a class="indexterm" name="jakartackbk-CHP-11-ITERM-3267"></a>
                                 <a class="indexterm" name="jakartackbk-CHP-11-ITERM-3268"></a> on the method before it is executed. The
                  <code class="literal">PostMethod</code> will send a request with a
                  <code class="filename">Content-Length</code> header, which reflects the size
                  of the file sent in the request body. The following example
                  demonstrates the use of <code class="literal">PostMethod</code> to send data
                  from a file in a request body:
               </p><a name="I_11_tt450"></a><pre class="programlisting">
               <strong class="userinput"><code>import</code></strong> org.apache.commons.httpclient.HttpClient;
<strong class="userinput"><code>import</code></strong> org.apache.commons.httpclient.HttpException;
<strong class="userinput"><code>import</code></strong> org.apache.commons.httpclient.methods.PostMethod;

HttpClient client = <strong class="userinput"><code>new</code></strong> HttpClient( );
        
// Create POST method
String weblintURL = "http://ats.nist.gov/cgi-bin/cgi.tcl/echo.cgi";
PostMethod method = <strong class="userinput"><code>new</code></strong> PostMethod( weblintURL );

File file = <strong class="userinput"><code>new</code></strong> File( "project.xml" );
<span class="bold"><strong>method.setRequestBody( new FileInputStream( file ) );</strong></span>
               <span class="bold"><strong>method.setRequestContentLength( (int)file.length( ) );</strong></span>

// Execute and print response
client.executeMethod( method );
String response = method.getResponseBodyAsString( );
System.out.println( response );

method.releaseConnection( );</pre><p>The previous example hits a CGI script, which echoes the contents of
                  the request body. When this example is executed, the response body is
                  printed with the contents of the file that was uploaded in an HTTP
                  POST request.
               </p>
            </div>
            <div class="navfooter">
               <hr>
               <table width="100%" summary="Navigation footer">
                  <tr>
                     <td width="40%" align="left"><a accesskey="p" href="jakartackbk-CHP-11-SECT-8.html">Prev</a>&nbsp;
                     </td>
                     <td width="20%" align="center"><a accesskey="h" href="book.html">Home</a></td>
                     <td width="40%" align="right">&nbsp;<a accesskey="n" href="jakartackbk-CHP-11-SECT-8.3.html">Next</a></td>
                  </tr>
                  <tr>
                     <td width="40%" align="left" valign="top">11.8.&nbsp;Sending POST Data from a File&nbsp;</td>
                     <td width="20%" align="center"><span style="color:white;font-size:90%;"><a href="http://www.sonatype.com/" title="Discursive: Discursive">Sponsored by Discursive
                                                                      </a></span></td>
                     <td width="40%" align="right" valign="top">&nbsp;11.8.3.&nbsp;Discussion</td>
                  </tr>
               </table>
            </div><br><center>
                             Copyright 2009. Discursive. All Rights Reserved.
                           
            </center><script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1693297-1");
pageTracker._initData();
pageTracker._setDomainName(".sonatype.com");
pageTracker._trackPageview();
</script><script src="http://loopfuse.net/webrecorder/js/listen.js" type="text/javascript"></script><script type="text/javascript">
  _lf_cid = "LF_5208d25a";
_lf_remora();
</script></div>
      </div>
   </body>
</html>