<html xmlns:fo="http://www.w3.org/1999/XSL/Format">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>1.16.3.&nbsp;Discussion</title>
      <link rel="stylesheet" href="../css/html.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="book.html" title="Jakarta Commons Cookbook">
      <link rel="up" href="jakartackbk-CHP-1-SECT-16.html" title="1.16.&nbsp;Creating an Enum">
      <link rel="prev" href="jakartackbk-CHP-1-SECT-16.2.html" title="1.16.2.&nbsp;Solution">
      <link rel="next" href="jakartackbk-CHP-1-SECT-16.4.html" title="1.16.4.&nbsp;See Also">
   </head>
   <body>
      <div id="frame">
         <div id="forbg">
            <div id="user-header">
               <div id="logo"><a href="http://www.discursive.com" title="$"><img src="../images/discursive-logo.png" border="0"></a></div>
               <div id="right-header">
                  <h2>Common Java Cookbook</h2>
                  <h4>Edition: 0.1-SNAPSHOT</h4>
               </div>
               <div style="clear:both;"></div>
               <div id="left-sidebar"></div>
            </div>
            <div class="navheader">
               <table width="100%" summary="Navigation header">
                  <tr>
                     <td width="40%" align="left"><a accesskey="p" href="jakartackbk-CHP-1-SECT-16.2.html">1.16.2.&nbsp;Solution</a>&nbsp;
                     </td>
                     <td width="20%" align="center"><a accesskey="h" href="book.html">
                           												TOC
                                                                       </a></td>
                     <td width="40%" align="right">&nbsp;<a accesskey="n" href="jakartackbk-CHP-1-SECT-16.4.html">1.16.4.&nbsp;See Also</a></td>
                  </tr>
               </table>
            </div>
            <div class="sect2" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="jakartackbk-CHP-1-SECT-16.3"></a>1.16.3.&nbsp;Discussion
                        </h3>
                        <div class="section-icon"></div>
                     </div>
                  </div>
               </div>
               <p>Assume that you are writing a system to classify choral singers by
                  voice type: soprano, alto, tenor, and bass. Your database has a table
                  <code class="literal">dbo.lu_VoicePart</code>, which contains a part name and a
                  numeric part code. This voice part is a coded type; it needs both a
                  name and a code, and a straightforward design is achieved by
                  extending
                  <code class="literal">ValuedEnum</code>
                                 <a class="indexterm" name="jakartackbk-CHP-1-ITERM-1897"></a>. <code class="literal">ValuedEnum</code> is an
                  <code class="literal">Enum</code> that keeps track of a numeric code for each
                  instance of the enumeration. <code class="literal">PartEnum</code> extends
                  <code class="literal">ValuedEnum</code> to store static instances of the four
                  possible voice parts: soprano, alto, tenor, and bass. (See <a href="jakartackbk-CHP-1-SECT-16.3.html#jakartackbk-CHP-1-EX-11" title="Example&nbsp;1-11.&nbsp;Extending ValuedEnum to create an enum">Example 1-11</a>.)
               </p>
               <div class="example"><a name="jakartackbk-CHP-1-EX-11"></a><p class="title"><b>Example&nbsp;1-11.&nbsp;Extending ValuedEnum to create an enum</b></p>
                  <div class="example-contents"><pre class="programlisting">import java.util.*;
import org.apache.commons.lang.enum.ValuedEnum;

public final class PartEnum extends ValuedEnum {
    public static int  SOPRANO_VAL = 1;
    public static int  ALTO_VAL = 2;
    public static int  TENOR_VAL = 3;
    public static int  BASS_VAL = 4;

    public static PartEnum SOPRANO = new PartsEnum( "Soprano", SOPRANO_VAL );
    public static PartEnum ALTO = new PartsEnum( "Alto", ALTO_VAL );
    public static PartEnum TENOR = new PartsEnum( "Tenor", TENOR_VAL );
    public static PartEnum BASS = new PartsEnum( "Bass", BASS_VAL );

    private PartsEnum(String name, int value) { super( name, value ); }

    public static PartEnum getEnum(String part) {
        return (PartEnum) getEnum(PartEnum.class, part);
    }

    public static PartEnum getEnum(int part) {
        return (PartEnum) getEnum(PartEnum.class, part);
    }

    public static Map getEnumMap( ) {
        return getEnumMap(PartEnum.class);
    }

    public static List getEnumList( ) {
        return getEnumList(PartEnum.class);
    }

    public static Iterator iterator( ) {
        return iterator(PartEnum.class);
    }
}</pre></div>
               </div><br class="example-break"><p>This class extends <code class="literal">ValuedEnum</code> and has a private
                  constructor. This guarantees that the only instances of this
                  enumeration will be defined in <code class="literal">PartEnum</code>; four
                  instances of <code class="literal">PartEnum</code> are created as public static
                  final constants, and a name is assigned to every part. (See <a href="jakartackbk-CHP-1-SECT-16.3.html#jakartackbk-CHP-1-EX-12" title="Example&nbsp;1-12.&nbsp;Vocalist bean with a PartEnum">Example 1-12</a>.)
               </p>
               <div class="example"><a name="jakartackbk-CHP-1-EX-12"></a><p class="title"><b>Example&nbsp;1-12.&nbsp;Vocalist bean with a PartEnum</b></p>
                  <div class="example-contents"><pre class="programlisting">public class Vocalist {
    private String name;
    private PartEnum part;

    public String getName( ) { return name; }
    public void setName(String name) { this.name = name; }

    public PartEnum getPart( ) { return part; }
    public void setPart(PartEnum part) { this.part = part; }
}</pre></div>
               </div><br class="example-break"><p>Checking for every voice part involves a call to
                  <code class="literal">PartEnum.iterator( )</code>, which obviates the need for
                  an <code class="literal">if</code>/<code class="literal">else if</code> control statement
                  to catch every single voice part:
               </p><a name="I_1_tt44"></a><pre class="programlisting">Iterator parts = PartEnum.iterator( );
while( parts.hasNext( ) ) {
  PartEnum part = (PartEnum) parts.next( );
  if( part.equals( vocalist.getPart( ) ) ) {
    System.out.println( "Vocalist is a " + part.getValue( ) );
  }
}</pre><p>This example did not include any reference to a specific voice part,
                  but, if your code needs to reference a specific voice type, it can
                  use the static constants in
                  <code class="literal">PartEnum</code>&#8212;<code class="literal">PartEnum.SOPRANO</code>,
                  <code class="literal">PartEnum.ALTO</code>, <code class="literal">PartEnum.TENOR</code>,
                  and <code class="literal">PartEnum.BASS</code>. And, lastly, it is impossible
                  to create a <code class="literal">Vocalist</code> object with an invalid voice
                  part, as the part property must be one of the four static instances
                  of <code class="literal">PartEnum</code> defined in a
                  <code class="literal">PartEnum</code> or <code class="literal">null</code>.
               </p>
               <p>Using Enum types becomes especially important if an object has
                  multiple classifications. If you were creating an object to track a
                  person, you could easily end up with two overlapping classifications.
                  In <a href="jakartackbk-CHP-1-SECT-16.3.html#jakartackbk-CHP-1-EX-13" title="Example&nbsp;1-13.&nbsp;Using public static final constants for category information">Example 1-13</a>, both <code class="literal">jobStatus</code>
                  and <code class="literal">gender</code> can be <code class="literal">UNKNOWN</code>, and
                  the valid options for both <code class="literal">jobStatus</code> and
                  <code class="literal">gender</code> are defined as public static
                  <code class="literal">int</code> variables.
               </p>
               <div class="example"><a name="jakartackbk-CHP-1-EX-13"></a><p class="title"><b>Example&nbsp;1-13.&nbsp;Using 
                        public static final constants for category information</b></p>
                  <div class="example-contents"><a class="indexterm" name="jakartackbk-CHP-1-ITERM-1898"></a><a class="indexterm" name="jakartackbk-CHP-1-ITERM-1899"></a><pre class="programlisting">public class Person {
    public static final int STUDENT = -1;
    public static final int EMPLOYED = 0;
    public static final int UNEMPLOYED = 1;
    public static final int RETIRED = 2;
    public static final int UNKNOWN = 3;
    public static final int MALE = 0;
    public static final int FEMALE = 1;

    private int jobStatus;
    private int gender;

    public int getJobStatus( ) { return jobStatus; }
    public void setJobStatus(int jobStatus) { this.jobStatus = jobStatus; }

    public int getGender( ) { return gender; }
    public void setGender(int gender) { this.gender = gender; }
}</pre></div>
               </div><br class="example-break"><p>This class defines two properties&#8212;<code class="literal">jobStatus</code>
                  and <code class="literal">gender</code>&#8212;and both correspond to codes
                  stored in the database. This system needs to know; that
                  <code class="literal">MALE</code>, <code class="literal">FEMALE</code>, and
                  <code class="literal">UNKNOWN</code> are the valid values for the
                  <code class="literal">gender</code> property; and <code class="literal">STUDENT</code>,
                  <code class="literal">EMPLOYED</code>, <code class="literal">UNEMPLOYED</code>,
                  <code class="literal">UNKNOWN</code>, and <code class="literal">RETIRED</code> all
                  correspond to the <code class="literal">jobStatus</code> property. This class
                  does not define which constants are related to which property. Is
                  <code class="literal">UNKNOWN</code> a <code class="literal">gender</code> or a
                  <code class="literal">jobStatus</code>? Some systems rename these static
                  variables to reflect which properties they correspond
                  to&#8212;<code class="literal">GENDER_MALE</code>,
                  <code class="literal">GENDER_FEMALE</code>, <code class="literal">and
                     GENDER_UNKNOWN</code> would clearly correspond to the
                  <code class="literal">gender</code> property; and
                  <code class="literal">JOB_STUDENT</code>, <code class="literal">JOB_EMPLOYED</code>,
                  <code class="literal">JOB_UNEMPLOYED</code>, <code class="literal">JOB_UNKNOWN</code>,
                  and <code class="literal">JOB_RETIRED</code> would correspond to the
                  <code class="literal">jobStatus</code> property. This solution only draws a
                  conceptual boundary in the mind of the programmer; no logical
                  separation is achieved, and there is still no way to guarantee that a
                  bean property will have a valid value. (See <a href="jakartackbk-CHP-1-SECT-16.3.html#jakartackbk-CHP-1-EX-14" title="Example&nbsp;1-14.&nbsp;Simplifying with ValueEnum">Example 1-14</a>.)
               </p>
               <div class="example"><a name="jakartackbk-CHP-1-EX-14"></a><p class="title"><b>Example&nbsp;1-14.&nbsp;Simplifying with ValueEnum</b></p>
                  <div class="example-contents"><pre class="programlisting">public class Person {
    private JobStatusEnum jobStatus;
    private GenderEnum gender;

    public JobStatusEnum getJobStatus( ) { return jobStatus; }
    public void setJobStatus(JobStatusEnum jobStatus) { 
        this.jobStatus = jobStatus; 
    }

    public GenderEnum getGender( ) { return gender; }
    public void setGender(GenderEnum gender) { this.gender = gender; }
}</pre></div>
               </div><br class="example-break"><p>The solution to this problem can be solved by extending
                  <code class="literal">ValuedEnum</code> and getting rid of the confusing
                  mish-mash of public static constants. If you find yourself frequently
                  creating static variables to reflect categories or types, enums are
                  the solution. And, if you haven't upgraded to Java
                  1.5, use<a class="indexterm" name="jakartackbk-CHP-1-ITERM-1900"></a> 
                                 <a class="indexterm" name="jakartackbk-CHP-1-ITERM-1901"></a> Commons Lang
                  <code class="literal">Enum</code> and <code class="literal">ValuedEnum</code>.
               </p>
            </div>
            <div class="navfooter">
               <hr>
               <table width="100%" summary="Navigation footer">
                  <tr>
                     <td width="40%" align="left"><a accesskey="p" href="jakartackbk-CHP-1-SECT-16.2.html">Prev</a>&nbsp;
                     </td>
                     <td width="20%" align="center"><a accesskey="h" href="book.html">Home</a></td>
                     <td width="40%" align="right">&nbsp;<a accesskey="n" href="jakartackbk-CHP-1-SECT-16.4.html">Next</a></td>
                  </tr>
                  <tr>
                     <td width="40%" align="left" valign="top">1.16.2.&nbsp;Solution&nbsp;</td>
                     <td width="20%" align="center"><span style="color:white;font-size:90%;"><a href="http://www.sonatype.com/" title="Discursive: Discursive">Sponsored by Discursive
                                                                      </a></span></td>
                     <td width="40%" align="right" valign="top">&nbsp;1.16.4.&nbsp;See Also</td>
                  </tr>
               </table>
            </div><br><center>
                             Copyright 2009. Discursive. All Rights Reserved.
                           
            </center><script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1693297-1");
pageTracker._initData();
pageTracker._setDomainName(".sonatype.com");
pageTracker._trackPageview();
</script><script src="http://loopfuse.net/webrecorder/js/listen.js" type="text/javascript"></script><script type="text/javascript">
  _lf_cid = "LF_5208d25a";
_lf_remora();
</script></div>
      </div>
   </body>
</html>