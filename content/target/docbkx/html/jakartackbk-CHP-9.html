<html xmlns:fo="http://www.w3.org/1999/XSL/Format">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>Chapter&nbsp;9.&nbsp;Templating</title>
      <link rel="stylesheet" href="../css/html.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="book.html" title="Jakarta Commons Cookbook">
      <link rel="up" href="book.html" title="Jakarta Commons Cookbook">
      <link rel="prev" href="jakartackbk-CHP-8-SECT-10.4.html" title="8.10.4.&nbsp;See Also">
      <link rel="next" href="jakartackbk-CHP-9-SECT-1.html" title="9.1.&nbsp;Obtaining Commons JEXL">
   </head>
   <body>
      <div id="frame">
         <div id="forbg">
            <div id="user-header">
               <div id="logo"><a href="http://www.discursive.com" title="$"><img src="../images/discursive-logo.png" border="0"></a></div>
               <div id="right-header">
                  <h2>Common Java Cookbook</h2>
                  <h4>Edition: 0.1-SNAPSHOT</h4>
               </div>
               <div style="clear:both;"></div>
               <div id="left-sidebar"></div>
            </div>
            <div class="navheader">
               <table width="100%" summary="Navigation header">
                  <tr>
                     <td width="40%" align="left"><a accesskey="p" href="jakartackbk-CHP-8-SECT-10.4.html">8.10.4.&nbsp;See Also</a>&nbsp;
                     </td>
                     <td width="20%" align="center"><a accesskey="h" href="book.html">
                           												TOC
                                                                       </a></td>
                     <td width="40%" align="right">&nbsp;<a accesskey="n" href="jakartackbk-CHP-9-SECT-1.html">9.1.&nbsp;Obtaining Commons JEXL</a></td>
                  </tr>
               </table>
            </div>
            <div class="chapter" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title"><a name="jakartackbk-CHP-9"></a>Chapter&nbsp;9.&nbsp;Templating
                        </h2>
                     </div>
                  </div>
               </div>
               <div class="toc">
                  <dl>
                     <dt><span class="sect1"><a href="jakartackbk-CHP-9.html#ch09-2-fm2xml">9.1. Introduction</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9.html#ch09-3-fm2xml">9.1.1. Common Templating Problems in Applications</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9.html#ch09-4-fm2xml">9.1.2. Templating in Web Applications</a></span></dt>
                        </dl>
                     </dd>
                     <dt><span class="sect1"><a href="jakartackbk-CHP-9-SECT-1.html">9.1. Obtaining Commons JEXL</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-1.html#jakartackbk-CHP-9-SECT-1.1">9.1.1. Problem</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-1.2.html">9.1.2. Solution</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-1.3.html">9.1.3. Discussion</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-1.4.html">9.1.4. See Also</a></span></dt>
                        </dl>
                     </dd>
                     <dt><span class="sect1"><a href="jakartackbk-CHP-9-SECT-2.html">9.2. Using an Expression Language</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-2.html#jakartackbk-CHP-9-SECT-2.1">9.2.1. Problem</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-2.2.html">9.2.2. Solution</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-2.3.html">9.2.3. Discussion</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-2.4.html">9.2.4. See Also</a></span></dt>
                        </dl>
                     </dd>
                     <dt><span class="sect1"><a href="jakartackbk-CHP-9-SECT-3.html">9.3. Invoking Methods in an Expression</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-3.html#jakartackbk-CHP-9-SECT-3.1">9.3.1. Problem</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-3.2.html">9.3.2. Solution</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-3.3.html">9.3.3. Discussion</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-3.4.html">9.3.4. See Also</a></span></dt>
                        </dl>
                     </dd>
                     <dt><span class="sect1"><a href="jakartackbk-CHP-9-SECT-4.html">9.4. Externalizing Logic with an Expression Language</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-4.html#jakartackbk-CHP-9-SECT-4.1">9.4.1. Problem</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-4.2.html">9.4.2. Solution</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-4.3.html">9.4.3. Discussion</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-4.4.html">9.4.4. See Also</a></span></dt>
                        </dl>
                     </dd>
                     <dt><span class="sect1"><a href="jakartackbk-CHP-9-SECT-5.html">9.5. Obtaining Jakarta Velocity</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-5.html#jakartackbk-CHP-9-SECT-5.1">9.5.1. Problem</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-5.2.html">9.5.2. Solution</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-5.3.html">9.5.3. Discussion</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-5.4.html">9.5.4. See Also</a></span></dt>
                        </dl>
                     </dd>
                     <dt><span class="sect1"><a href="jakartackbk-CHP-9-SECT-6.html">9.6. Using a Simple Templating Language</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-6.html#jakartackbk-CHP-9-SECT-6.1">9.6.1. Problem</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-6.2.html">9.6.2. Solution</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-6.3.html">9.6.3. Discussion</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-6.4.html">9.6.4. See Also</a></span></dt>
                        </dl>
                     </dd>
                     <dt><span class="sect1"><a href="jakartackbk-CHP-9-SECT-7.html">9.7. Writing Templates with Conditionals and Loops</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-7.html#jakartackbk-CHP-9-SECT-7.1">9.7.1. Problem</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-7.2.html">9.7.2. Solution</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-7.3.html">9.7.3. Discussion</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-7.4.html">9.7.4. See Also</a></span></dt>
                        </dl>
                     </dd>
                     <dt><span class="sect1"><a href="jakartackbk-CHP-9-SECT-8.html">9.8. Using Macros in a Templating Engine</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-8.html#jakartackbk-CHP-9-SECT-8.1">9.8.1. Problem</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-8.2.html">9.8.2. Solution</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-8.3.html">9.8.3. Discussion</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-8.4.html">9.8.4. See Also</a></span></dt>
                        </dl>
                     </dd>
                     <dt><span class="sect1"><a href="jakartackbk-CHP-9-SECT-9.html">9.9. Invoking Methods in a Template</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-9.html#jakartackbk-CHP-9-SECT-9.1">9.9.1. Problem</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-9.2.html">9.9.2. Solution</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-9.3.html">9.9.3. Discussion</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-9.4.html">9.9.4. See Also</a></span></dt>
                        </dl>
                     </dd>
                     <dt><span class="sect1"><a href="jakartackbk-CHP-9-SECT-10.html">9.10. Obtaining FreeMarker</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-10.html#jakartackbk-CHP-9-SECT-10.1">9.10.1. Problem</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-10.2.html">9.10.2. Solution</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-10.3.html">9.10.3. Discussion</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-10.4.html">9.10.4. See Also</a></span></dt>
                        </dl>
                     </dd>
                     <dt><span class="sect1"><a href="jakartackbk-CHP-9-SECT-11.html">9.11. Using a Complex Scripting Engine</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-11.html#jakartackbk-CHP-9-SECT-11.1">9.11.1. Problem</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-11.2.html">9.11.2. Solution</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-11.3.html">9.11.3. Discussion</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-11.4.html">9.11.4. See Also</a></span></dt>
                        </dl>
                     </dd>
                     <dt><span class="sect1"><a href="jakartackbk-CHP-9-SECT-12.html">9.12. Accessing XML Documents from a Templating Engine</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-12.html#jakartackbk-CHP-9-SECT-12.1">9.12.1. Problem</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-12.2.html">9.12.2. Solution</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-12.3.html">9.12.3. Discussion</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-12.4.html">9.12.4. See Also</a></span></dt>
                        </dl>
                     </dd>
                     <dt><span class="sect1"><a href="jakartackbk-CHP-9-SECT-13.html">9.13. Using Velocity in a Web Application</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-13.html#jakartackbk-CHP-9-SECT-13.1">9.13.1. Problem</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-13.2.html">9.13.2. Solution</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-13.3.html">9.13.3. Discussion</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-13.4.html">9.13.4. See Also</a></span></dt>
                        </dl>
                     </dd>
                     <dt><span class="sect1"><a href="jakartackbk-CHP-9-SECT-14.html">9.14. Using FreeMarker in a Web Application</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-14.html#jakartackbk-CHP-9-SECT-14.1">9.14.1. Problem</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-14.2.html">9.14.2. Solution</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-14.3.html">9.14.3. Discussion</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-14.4.html">9.14.4. See Also</a></span></dt>
                        </dl>
                     </dd>
                     <dt><span class="sect1"><a href="jakartackbk-CHP-9-SECT-15.html">9.15. Writing Templates in Eclipse</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-15.html#jakartackbk-CHP-9-SECT-15.1">9.15.1. Problem</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-15.2.html">9.15.2. Solution</a></span></dt>
                           <dt><span class="sect2"><a href="jakartackbk-CHP-9-SECT-15.3.html">9.15.3. See Also</a></span></dt>
                        </dl>
                     </dd>
                  </dl>
               </div>
               <div class="sect1" lang="en">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h2 class="title" style="clear: both"><a name="ch09-2-fm2xml"></a>9.1.&nbsp;Introduction
                           </h2>
                           <div class="section-icon"></div>
                        </div>
                     </div>
                  </div>
                  <p>Systems designed without clear separation between presentation and
                     application logic quickly become chores to maintain. Trivial
                     look-and-feel updates in such applications take days or weeks, and
                     trying to extend such a coupled architecture can introduce
                     unmanageable risks and code that is impossible to unit test. To
                     minimize the possibility of creating such disasters, avoid coupling
                     presentation and application logic through the use of a good
                     templating engine. Maintain clear separation between presentation and
                     application logic from the beginning&#8212;be orthogonal.
                     Don't print out HTML, XML, or SQL from Java code,
                     use a templating engine.
                  </p>
                  <p>The simplest example of templating is Java's
                     <code class="literal">MessageFormat</code>. A simple message, such as
                     <code class="literal">Hello {0}, I speak {1}</code>, can be parameterized using
                     the <code class="literal">MessageFormat</code> class. A more complex templating
                     example is found in applications that use Jakarta Velocity or
                     FreeMarker to avoid mixing Java with HTML or textual output.
                     Throughout this spectrum of complexity, the concept of templating
                     remains the same; a template with references to variables is merged
                     with a context containing these variables. There are many ways to
                     decouple the rigors of logic from the prettiness of presentation, and
                     after reading this chapter, you will have a range of options for
                     different situations.
                  </p>
                  <p>This chapter touches upon Jakarta Velocity, Jakarta Commons JEXL, and
                     a technology outside of the Apache Software Foundation named
                     FreeMarker. Templating engines are frequently used in web
                     application, and this chapter ends with instructions for integrating
                     these engines into a J2EE web application. Separating HTML or textual
                     content into a separate file allows you to give graphic designers and
                     business users a larger role in customizing and creating content for
                     the enduser. With a templating engine, you
                     can dramatically reduce the time and effort it takes to
                     make simple changes. But, by far, the largest benefit of a templating
                     engine is that it allows programmers to do more programming and
                     graphic designers to do more designing by reducing needless coupling
                     of presentation markup and compiled application logic.
                  </p>
                  <div class="sect2" lang="en">
                     <div class="titlepage">
                        <div>
                           <div>
                              <h3 class="title"><a name="ch09-3-fm2xml"></a>9.1.1.&nbsp;Common Templating Problems in Applications
                              </h3>
                              <div class="section-icon"></div>
                           </div>
                        </div>
                     </div>
                     <p>Server-side Java has won a fair amount of attention over the past
                        five years, but developers seldom consider using templating engines
                        when writing a standalone Java application. Consider the following
                        code, which prints a formatted report for a bank customer:
                     </p><a name="I_9_tt350"></a><pre class="programlisting">System.out.println( "******************************" );
System.out.println( "******* BANK STATEMENT *******" );
System.out.println( "******************************" );
Account[] accounts = AccountUtil.getAccounts("1232");
double total = 0.0;
for( int i = 0; i &lt; accounts.length; i++ ) {
    System.out.println( "Account: " + 
        accounts[i].getBalance( ) );
    total += accounts[i].getBalance( ); 
}
System.out.println( "Total: " + total );
System.out.println( "******************************" );</pre><p>In this example, textual content is mixed with Java code, and a
                        programmer must be involved in any change to the look and feel of the
                        report. If this report were generated using an external template, a
                        nonprogrammer could be trained to change the report, or the customers
                        could customize the output of this program by modifying a template
                        with straightforward syntax.
                     </p>
                     <p>Consider another common problem: generating an XML document. There
                        are seemingly thousands of ways to create an XML document: using DOM
                        or JDOM to create a <code class="literal">Document</code> object, serializing
                        an object with Jakarta Commons Betwixt, and using
                        Exolab's Castor are a few of these possibilities.
                        Some of these techniques are explained in <a href="jakartackbk-CHP-6.html" title="Chapter&nbsp;6.&nbsp;XML">Chapter 6</a>, but here is an example of how <span class="bold"><strong>not</strong></span> to generate an XML document:
                     </p><a name="I_9_tt351"></a><pre class="programlisting">System.out.println("&lt;?xml version=\"1.0\"?&gt;");
System.out.println("&lt;Config&gt;");
System.out.println("&lt;Property name=\"" + name + "\"\n" +
                   "value=\"" + value + "\"/&gt;");
System.out.println("&lt;/Config&gt;");</pre><p>Avoid this practice at all costs. Here are a few red flags from the
                        previous two examples:
                     </p>
                     <div class="variablelist">
                        <dl>
                           <dt><span class="term">Mixed languages</span></dt>
                           <dd>
                              <p>Nesting an XML document into a Java class by way of printing out
                                 <code class="literal">String</code> literals is unreadable. When you need to
                                 mentally decode heavily escaped XML nested in Java, you are asking
                                 yourself to do too much at once. You will also end up with mixed
                                 context, an XML element starting within a pair of parentheses, and
                                 ending in another. In this fugue of forward and back slashes, one
                                 misplaced slash produces an invalid XML document, or one overlooked
                                 <code class="literal">NullPointerException</code> causes a catastrophe. You are
                                 asking your brain to compile two strands of code with intertwined and
                                 overlapping syntax. While your compiler might not complain, your
                                 system will be difficult to maintain. Code that is difficult to
                                 comprehend is even more difficult to maintain.
                              </p>
                           </dd>
                           <dt><span class="term">Escaped characters in compiled code</span></dt>
                           <dd>
                              <p>Escaping characters in <code class="literal">String</code> literals quickly
                                 becomes an annoyance, especially if the strings to be encoded contain
                                 back slashes and double quotes. I accept that the
                                 <code class="literal">String</code> 
                                                         <code class="filename">c:\temp\blah.txt</code>, must
                                 be written as <code class="literal">c:\\temp\\blah.txt</code>, but I
                                 don't enjoy doing it. How confusing is a literal
                                 <code class="literal">\"c:\\temp\\\</code>"? Avoid this entirely by using a
                                 templating engine or externalizing strings in properties files.
                              </p>
                           </dd>
                           <dt><span class="term">Mixing presentation with conditional or iterative logic</span></dt>
                           <dd>
                              <p>A previous example printed each account balance in a
                                 <code class="literal">for</code> loop. A common trick in JSP is to create a
                                 <code class="literal">while</code> loop with JSP scriptlets, surrounding the
                                 code to be executed with <code class="literal">&lt;% while( i &lt; 4 ) {
                                    %&gt;</code> and <code class="literal">&lt;% } %&gt;</code>. Templating
                                 languages such as Velocity or even JSP 2.0 with JSTL support
                                 conditional and iterative operations without asking you to mix
                                 languages.
                              </p>
                           </dd>
                        </dl>
                     </div>
                     <p>There are other opportunities for using a template in an application.
                        These include code generation, creating SQL scripts, and interacting
                        with an interpreted language via generated scripts. The list
                        continues, and it proves that templating isn't just
                        for making web pages.
                     </p>
                  </div>
                  <div class="sect2" lang="en">
                     <div class="titlepage">
                        <div>
                           <div>
                              <h3 class="title"><a name="ch09-4-fm2xml"></a>9.1.2.&nbsp;Templating in Web Applications
                              </h3>
                              <div class="section-icon"></div>
                           </div>
                        </div>
                     </div>
                     <p>Examine the JSP
                        code<a class="indexterm" name="jakartackbk-CHP-9-ITERM-2939"></a> 
                                       <a class="indexterm" name="jakartackbk-CHP-9-ITERM-2940"></a>
                                       <a class="indexterm" name="jakartackbk-CHP-9-ITERM-2941"></a> below (the variable names have
                        been changed to protect the innocent). Take this code and multiply it
                        by 100 or 200 pages. Now, what happens when you want to move from
                        PostgreSQL to Oracle? Do you do a global search and replace on the
                        driver class name and the JDBC URL? Or, even worse, what happens when
                        someone asks you to translate the entire site to Chinese in two
                        weeks? It would be easier to learn Chinese in two weeks than it would
                        be to internationalize this code. The offending JSP is:
                     </p><a name="I_9_tt352"></a><pre class="programlisting">&lt;% ResultSet rs;
    try {
      Class.forName( "org.postgresql.Driver" );
      String dbURL = "jdbc:postgresql://192.168.0.1/dbname";
      Connection dbCon = 
            DriverManager.getConnection( dbURL, "system", "");

        PreparedStatement ps = 
            dbCon.prepareStatement( "select * from Offer " +
                                  "where id = ?" );
      ps.setString( 1, request.getAttribute("id") );
      rs = ps.executeQuery( );
        rs.next( );
    } catch( Exception e ) {
        %&gt;&lt;%= Something bad happened, Call Jack (800) 232-2233 %&gt;
&lt;% } %&gt;

&lt;jsp:include page="header.html" /&gt;

Hello &lt;%= rs.getString("name") %&gt;,

I would like to inform you of a good offer.
&lt;%= rs.getString("offerText") %&gt; 

There are a few things I would like to tell you.
&lt;ul&gt;
  &lt;% Thing[] things = OfferUtil.getThings( rs.getString("id") );
     for( int i = 0; i &lt; things.length; i++ ) { %&gt;
     &lt;li&gt;&lt;%= things[i].getText( )%&gt;&lt;/li&gt; 
  &lt;% } %&gt;
&lt;/ul&gt;    

&lt;jsp:include page="footer.html" /&gt;</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
                        <h3 class="title"><a name="jakartackbk-CHP-9-NOTE-65"></a>Tip
                        </h3>
                        <p>This is real code from a real system, and it was written by a whole
                           team of programmers who didn't find anything
                           terribly wrong with this style. If you were raised on JSP like this,
                           you might not recognize some of the problems. What is wrong with the
                           previous example? Four different
                           "languages" are combined in one
                           file (Java, SQL, HTML, and JSP); the page starts off with JSP
                           scriptlets, then the example contains Java code that prints out HTML
                           and generates SQL statements. Lastly, this particular JSP page
                           forgets to close the connection it created to the
                           database&#8212;something that could easily create a resource leak
                           under a heavy load. Make it simpler, use a templating engine (or
                           upgrade to JSP 2.0) and <span class="bold"><strong>never write a line of
                                 Java in a JSP again</strong></span>.
                        </p>
                     </div>
                     <p>Velocity, JEXL, and FreeMarker are remedies for the coupling issues
                        demonstrated in the previous examples. Each of these tools can be
                        integrated into any application in a matter of minutes. In this
                        chapter, you will learn techniques for separating presentation logic
                        from behavioral (or business) logic. At the end of the chapter, I
                        will briefly explain how you can integrate all of these utilities
                        into a J2EE web application.
                     </p>
                  </div>
               </div>
            </div>
            <div class="navfooter">
               <hr>
               <table width="100%" summary="Navigation footer">
                  <tr>
                     <td width="40%" align="left"><a accesskey="p" href="jakartackbk-CHP-8-SECT-10.4.html">Prev</a>&nbsp;
                     </td>
                     <td width="20%" align="center"><a accesskey="h" href="book.html">Home</a></td>
                     <td width="40%" align="right">&nbsp;<a accesskey="n" href="jakartackbk-CHP-9-SECT-1.html">Next</a></td>
                  </tr>
                  <tr>
                     <td width="40%" align="left" valign="top">8.10.4.&nbsp;See Also&nbsp;</td>
                     <td width="20%" align="center"><span style="color:white;font-size:90%;"><a href="http://www.sonatype.com/" title="Discursive: Discursive">Sponsored by Discursive
                                                                      </a></span></td>
                     <td width="40%" align="right" valign="top">&nbsp;9.1.&nbsp;Obtaining Commons JEXL</td>
                  </tr>
               </table>
            </div><br><center>
                             Copyright 2009. Discursive. All Rights Reserved.
                           
            </center><script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1693297-1");
pageTracker._initData();
pageTracker._setDomainName(".sonatype.com");
pageTracker._trackPageview();
</script><script src="http://loopfuse.net/webrecorder/js/listen.js" type="text/javascript"></script><script type="text/javascript">
  _lf_cid = "LF_5208d25a";
_lf_remora();
</script></div>
      </div>
   </body>
</html>