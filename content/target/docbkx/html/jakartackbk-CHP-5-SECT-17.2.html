<html xmlns:fo="http://www.w3.org/1999/XSL/Format">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>5.17.2.&nbsp;Solution</title>
      <link rel="stylesheet" href="../css/html.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="book.html" title="Jakarta Commons Cookbook">
      <link rel="up" href="jakartackbk-CHP-5-SECT-17.html" title="5.17.&nbsp;Creating a Least Recently Used Cache">
      <link rel="prev" href="jakartackbk-CHP-5-SECT-17.html" title="5.17.&nbsp;Creating a Least Recently Used Cache">
      <link rel="next" href="jakartackbk-CHP-5-SECT-17.3.html" title="5.17.3.&nbsp;Discussion">
   </head>
   <body>
      <div id="frame">
         <div id="forbg">
            <div id="user-header">
               <div id="logo"><a href="http://www.discursive.com" title="$"><img src="../images/discursive-logo.png" border="0"></a></div>
               <div id="right-header">
                  <h2>Common Java Cookbook</h2>
                  <h4>Edition: 0.1-SNAPSHOT</h4>
               </div>
               <div style="clear:both;"></div>
               <div id="left-sidebar"></div>
            </div>
            <div class="navheader">
               <table width="100%" summary="Navigation header">
                  <tr>
                     <td width="40%" align="left"><a accesskey="p" href="jakartackbk-CHP-5-SECT-17.html">5.17.&nbsp;Creating a Least Recently Used Cache</a>&nbsp;
                     </td>
                     <td width="20%" align="center"><a accesskey="h" href="book.html">
                           												TOC
                                                                       </a></td>
                     <td width="40%" align="right">&nbsp;<a accesskey="n" href="jakartackbk-CHP-5-SECT-17.3.html">5.17.3.&nbsp;Discussion</a></td>
                  </tr>
               </table>
            </div>
            <div class="sect2" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="jakartackbk-CHP-5-SECT-17.2"></a>5.17.2.&nbsp;Solution
                        </h3>
                        <div class="section-icon"></div>
                     </div>
                  </div>
               </div>
               <p>Use <code class="literal">LRUMap</code>&#8212;a fixed size map that uses the
                  least recently used algorithm to evict entries once the maximum size
                  has been reached. The least recently used algorithm evicts the
                  element that has not been used for the longest amount of time. The
                  following example demonstrates the use of an
                  <code class="literal">LRUMap</code> to store stock quotes:
               </p><a name="I_5_tt244"></a><pre class="programlisting">import java.util.Map;
import org.apache.commons.collections.map.LRUMap;

<strong class="userinput"><code>cache = new LRUMap( 5 );</code></strong>
       
// Populate the cache with 5 stock prices
cache.put( "MSFT", new Float( 0.03 ) );
cache.put( "TSC", new Float( 0.001 ) );
cache.put( "LU", new Float( 23.30 ) );
cache.put( "CSCO", new Float( 242.20 ) );
cache.put( "P", new Float( 10.23 ) );
        
// Now use some of the entries in the cache
Float cscoPrice  = (Float) cache.get( "CSCO" );
Float msPrice = (Float) cache.get( "MSFT" );
Float tscPrice = (Float) cache.get( "TSC" );
Float luPrice = (Float) cache.get( "LU" );
Float pPrice = (Float) cache.get( "P" );
Float msPrice2 = (Float) cache.get( "MSFT" );
       
<strong class="userinput"><code>// Add another price to the Map, this should kick out the LRU item.</code></strong>
               <strong class="userinput"><code>cache.put( "AA", new Float( 203.20 ) );</code></strong>
               <strong class="userinput"><code>     </code></strong>
               <strong class="userinput"><code>// CSCO was the first price requested, it is therefore the</code></strong>
               <strong class="userinput"><code>// least recently used.</code></strong>
               <strong class="userinput"><code>if( !cache.containsKey("CSCO") ) {</code></strong>
               <strong class="userinput"><code>    System.out.println( "As expected CSCO was discarded" );</code></strong>
               <strong class="userinput"><code>}</code></strong>
            </pre><p>Since the <code class="literal">LRUMap</code> created in this example can only
                  hold five elements, the "CSCO"
                  quote is evicted when "AA" is added
                  to the map because it is the "least recently
                  used."
               </p>
            </div>
            <div class="navfooter">
               <hr>
               <table width="100%" summary="Navigation footer">
                  <tr>
                     <td width="40%" align="left"><a accesskey="p" href="jakartackbk-CHP-5-SECT-17.html">Prev</a>&nbsp;
                     </td>
                     <td width="20%" align="center"><a accesskey="h" href="book.html">Home</a></td>
                     <td width="40%" align="right">&nbsp;<a accesskey="n" href="jakartackbk-CHP-5-SECT-17.3.html">Next</a></td>
                  </tr>
                  <tr>
                     <td width="40%" align="left" valign="top">5.17.&nbsp;Creating a Least Recently Used Cache&nbsp;</td>
                     <td width="20%" align="center"><span style="color:white;font-size:90%;"><a href="http://www.sonatype.com/" title="Discursive: Discursive">Sponsored by Discursive
                                                                      </a></span></td>
                     <td width="40%" align="right" valign="top">&nbsp;5.17.3.&nbsp;Discussion</td>
                  </tr>
               </table>
            </div><br><center>
                             Copyright 2009. Discursive. All Rights Reserved.
                           
            </center><script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1693297-1");
pageTracker._initData();
pageTracker._setDomainName(".sonatype.com");
pageTracker._trackPageview();
</script><script src="http://loopfuse.net/webrecorder/js/listen.js" type="text/javascript"></script><script type="text/javascript">
  _lf_cid = "LF_5208d25a";
_lf_remora();
</script></div>
      </div>
   </body>
</html>