<html xmlns:fo="http://www.w3.org/1999/XSL/Format">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>5.7.3.&nbsp;Discussion</title>
      <link rel="stylesheet" href="../css/html.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="book.html" title="Jakarta Commons Cookbook">
      <link rel="up" href="jakartackbk-CHP-5-SECT-7.html" title="5.7.&nbsp;Using a Buffer">
      <link rel="prev" href="jakartackbk-CHP-5-SECT-7.2.html" title="5.7.2.&nbsp;Solution">
      <link rel="next" href="jakartackbk-CHP-5-SECT-7.4.html" title="5.7.4.&nbsp;See Also">
   </head>
   <body>
      <div id="frame">
         <div id="forbg">
            <div id="user-header">
               <div id="logo"><a href="http://www.discursive.com" title="$"><img src="../images/discursive-logo.png" border="0"></a></div>
               <div id="right-header">
                  <h2>Common Java Cookbook</h2>
                  <h4>Edition: 0.1-SNAPSHOT</h4>
               </div>
               <div style="clear:both;"></div>
               <div id="left-sidebar"></div>
            </div>
            <div class="navheader">
               <table width="100%" summary="Navigation header">
                  <tr>
                     <td width="40%" align="left"><a accesskey="p" href="jakartackbk-CHP-5-SECT-7.2.html">5.7.2.&nbsp;Solution</a>&nbsp;
                     </td>
                     <td width="20%" align="center"><a accesskey="h" href="book.html">
                           												TOC
                                                                       </a></td>
                     <td width="40%" align="right">&nbsp;<a accesskey="n" href="jakartackbk-CHP-5-SECT-7.4.html">5.7.4.&nbsp;See Also</a></td>
                  </tr>
               </table>
            </div>
            <div class="sect2" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="jakartackbk-CHP-5-SECT-7.3"></a>5.7.3.&nbsp;Discussion
                        </h3>
                        <div class="section-icon"></div>
                     </div>
                  </div>
               </div>
               <p>A FIFO buffer can be viewed as a kind of stack; instead of
                  <code class="literal">pop( )</code> returning the last item to be placed on the
                  stack, <code class="literal">remove( )</code> returns the bottom of the
                  stack&#8212;the first item added to the <code class="literal">Buffer</code>. A
                  <code class="literal">Buffer</code> throws a
                  <code class="literal">BufferUnderflowException</code> if you try to
                  <code class="literal">remove( )</code> or <code class="literal">get( )</code> an element
                  from an empty <code class="literal">Buffer</code>. This data structure is
                  useful if you need a temporary holding area between stages in a
                  pipeline&#8212;a queue to hold objects as they wait to be processed
                  by the next stage. An unbounded<a class="indexterm" name="jakartackbk-CHP-5-ITERM-2494"></a> FIFO buffer has no size limit, and, as
                  such, it could grow to a limitless size. In fact, if an application
                  continued to fill an unbounded buffer, it would exhaust available
                  memory. <a href="jakartackbk-CHP-5-SECT-7.3.html#jakartackbk-CHP-5-FIG-1" title="Figure&nbsp;5-1.&nbsp;A FIFO buffer">Figure 5-1</a> describes a FIFO buffer as a
                  linear sequence of elements: items flow through this sequence from
                  left to right.
               </p>
               <div class="figure"><a name="jakartackbk-CHP-5-FIG-1"></a><div class="figure-contents">
                     <div class="mediaobject"><a name="I_5_tt220"></a><img src="figs/web/jccb_0501.png" alt="A FIFO buffer"></div>
                  </div>
                  <p class="title"><b>Figure&nbsp;5-1.&nbsp;A FIFO buffer</b></p>
               </div><br class="figure-break"><p>In addition to
                  <code class="literal">UnboundedFifoBuffer</code>
                                 <a class="indexterm" name="jakartackbk-CHP-5-ITERM-2495"></a>,
                  there is a bounded
                  counterpart&#8212;<code class="literal">BoundedFifoBuffer</code>.
                  <code class="literal">BoundedFifoBuffer</code>
                                 <a class="indexterm" name="jakartackbk-CHP-5-ITERM-2496"></a>
                  has a maximum size that cannot be exceeded; adding an object to a
                  <code class="literal">BoundedFifoBuffer</code> already at maximum size will
                  cause a
                  <code class="literal">BufferOverflowException</code>
                                 <a class="indexterm" name="jakartackbk-CHP-5-ITERM-2497"></a>.
                  <a href="jakartackbk-CHP-5-SECT-7.3.html#jakartackbk-CHP-5-EX-4" title="Example&nbsp;5-4.&nbsp;Using a BoundedFifoBuffer">Example 5-4</a> demonstrates the use of a bounded buffer
                  with a maximum size limit of two.
               </p>
               <div class="example"><a name="jakartackbk-CHP-5-EX-4"></a><p class="title"><b>Example&nbsp;5-4.&nbsp;Using a BoundedFifoBuffer</b></p>
                  <div class="example-contents"><pre class="programlisting">import org.apache.commons.collections.Buffer;
import org.apache.commons.collections.BufferOverflowException;
import org.apache.commons.collections.buffer.BoundedFifoBuffer;
...

<strong class="userinput"><code>// Create a Bounded FIFO with a max size of two</code></strong>
                  <strong class="userinput"><code>Buffer buffer = new BoundedFifoBuffer(2);</code></strong>

buffer.add( "One" );
buffer.add( "Two" );

// Adding a third element to this buffer will cause an exception
try {
    buffer.add( "Three" );
} catch( BufferOverflowException bue ) {
    System.out.println( "Buffer is Full!" );
}

// Remove an object... Buffer now contains one element.
Object removed = buffer.remove( );

// Add another object
buffer.add( "Three" );

Object remove1 = buffer.remove( );
Object remove2 = buffer.remove( );

// This next remove( ) should cause a BufferUnderflowException
try {
    Object remove3 = buffer.remove( );
} catch( BufferUnderflowException bue ) {
    System.out.println( "Buffer is Empty!" );
}</pre></div>
               </div><br class="example-break"><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
                  <h3 class="title"><a name="jakartackbk-CHP-5-NOTE-57"></a>Tip
                  </h3>
                  <p>Later recipes will demonstrate the use of <code class="literal">Buffer</code>
                     objects in processing pipelines where it is important to provide a
                     limit on how much memory a <code class="literal">Buffer</code> is able to
                     consume.
                  </p>
               </div>
            </div>
            <div class="navfooter">
               <hr>
               <table width="100%" summary="Navigation footer">
                  <tr>
                     <td width="40%" align="left"><a accesskey="p" href="jakartackbk-CHP-5-SECT-7.2.html">Prev</a>&nbsp;
                     </td>
                     <td width="20%" align="center"><a accesskey="h" href="book.html">Home</a></td>
                     <td width="40%" align="right">&nbsp;<a accesskey="n" href="jakartackbk-CHP-5-SECT-7.4.html">Next</a></td>
                  </tr>
                  <tr>
                     <td width="40%" align="left" valign="top">5.7.2.&nbsp;Solution&nbsp;</td>
                     <td width="20%" align="center"><span style="color:white;font-size:90%;"><a href="http://www.sonatype.com/" title="Discursive: Discursive">Sponsored by Discursive
                                                                      </a></span></td>
                     <td width="40%" align="right" valign="top">&nbsp;5.7.4.&nbsp;See Also</td>
                  </tr>
               </table>
            </div><br><center>
                             Copyright 2009. Discursive. All Rights Reserved.
                           
            </center><script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1693297-1");
pageTracker._initData();
pageTracker._setDomainName(".sonatype.com");
pageTracker._trackPageview();
</script><script src="http://loopfuse.net/webrecorder/js/listen.js" type="text/javascript"></script><script type="text/javascript">
  _lf_cid = "LF_5208d25a";
_lf_remora();
</script></div>
      </div>
   </body>
</html>